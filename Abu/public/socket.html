

<!DOCTYPE HTML>
<html>
<head>
    <script src="../jquery.min.js"></script>
    <script type="text/javascript">
        function getQuery(name) {
            var results = new RegExp('[\\?&]' + name + '=([^&#]*)').exec(window.location.href);
            if (!results) {
                return 0;
            }
            return results[1] || 0;
        };
        function WebSocketTest()
        {
            if ("WebSocket" in window)
            {
                alert("WebSocket is supported by your Browser!");
                this.url = getQuery("u").replace("http", "ws");
                this.method = getQuery("m");
// Let us open a web socket
                var ws = new WebSocket(url);

                ws.onopen = function()
                {
// Web Socket is connected, send data using send()
                    ws.send("Message to send");
                    alert("Message is sent...");

                };

                ws.onmessage = function (evt)
                {
                    var received_msg = evt.data;
                    console.log(received_msg);
                    debugger
                    if(JSON.parse(received_msg).message.indexOf(window.method+'[') > -1)
                        $('body').append('<div>'+received_msg+'</div>');
                };

                ws.onclose = function()
                {
                    // websocket is closed.
                    alert("Connection is closed...");
                };
            }

            else
            {
                // The browser doesn't support WebSocket
                alert("WebSocket NOT supported by your Browser!");
            }
        }
        WebSocketTest()
    </script>

</head>
<body>

<div id="sse">
    <div>log Tail!!</div>
</div>

</body>
</html>